import{a as Q,r as b,b as F,j as W,e as X,g as l,h as r,w as o,o as Y,f as s,i as d,t as Z,m as ee,J as le,E as m,u as oe,_ as ae}from"./index-DiN20nqF.js";const se={class:"system-settings-container"},te={class:"card"},re={class:"card"},ne={class:"avatar-section"},de={class:"avatar-preview"},ue={class:"avatar-upload"},ie={class:"card"},me={class:"card"},pe={class:"theme-section"},fe={class:"card"},_e={class:"language-section"},ge={class:"card"},ce={class:"notification-section"},be={class:"card"},we=Q({__name:"SystemSettings",setup(ve){const j=oe(),R=b("userInfo"),y=b(!1),P=b(!1),U=b(!1),x=b(),k=b(),n=F({username:"admin",email:"admin@example.com",phone:"13800138000",role:"admin",bio:"系统管理员",avatar:"https://via.placeholder.com/100"}),q={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],phone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入有效的手机号",trigger:"blur"}],bio:[{max:200,message:"简介长度不能超过 200 个字符",trigger:"blur"}]},i=F({oldPassword:"",newPassword:"",confirmPassword:""}),E={oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"密码长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(t,e,f)=>{e!==i.newPassword?f(new Error("两次输入密码不一致")):f()},trigger:"blur"}]},g=F({theme:"light",language:"zh-CN",notifications:["email","system"]}),G=()=>{j.back()},M=async()=>{if(x.value)try{await x.value.validate(),y.value=!0,await new Promise(t=>setTimeout(t,800)),m.success("用户信息更新成功")}catch(t){m.error(t.message||"更新失败")}finally{y.value=!1}},z=()=>{Object.assign(n,{username:"admin",email:"admin@example.com",phone:"13800138000",role:"admin",bio:"系统管理员",avatar:"https://via.placeholder.com/100"})},I=async()=>{if(k.value)try{await k.value.validate(),P.value=!0,await new Promise(t=>setTimeout(t,800)),m.success("密码修改成功"),S()}catch(t){m.error(t.message||"修改失败")}finally{P.value=!1}},S=()=>{Object.assign(i,{oldPassword:"",newPassword:"",confirmPassword:""})},J=async()=>{U.value=!0;try{await new Promise(t=>setTimeout(t,800)),m.success("系统配置保存成功")}catch(t){m.error(t.message||"保存失败")}finally{U.value=!1}},h=(t,e)=>{n.avatar=URL.createObjectURL(e),m.success("头像上传成功")},A=t=>{const e=t.type==="image/jpeg"||t.type==="image/png",f=t.size/1024/1024<2;return e||m.error("只能上传 JPG/PNG 格式的图片"),f||m.error("图片大小不能超过 2MB"),e&&f};return W(()=>{setTimeout(()=>{},500)}),(t,e)=>{const f=r("el-page-header"),_=r("el-input"),u=r("el-form-item"),p=r("el-col"),w=r("el-row"),v=r("el-option"),B=r("el-select"),c=r("el-button"),N=r("el-form"),L=r("el-avatar"),O=r("el-icon"),D=r("el-upload"),T=r("el-tab-pane"),C=r("el-radio"),$=r("el-radio-group"),V=r("el-checkbox"),H=r("el-checkbox-group"),K=r("el-tabs");return Y(),X("div",se,[l(f,{onBack:G,content:"系统设置"}),l(K,{modelValue:R.value,"onUpdate:modelValue":e[11]||(e[11]=a=>R.value=a),class:"settings-tabs"},{default:o(()=>[l(T,{label:"用户信息",name:"userInfo"},{default:o(()=>[s("div",te,[e[14]||(e[14]=s("h3",{class:"section-title"},"基本信息",-1)),l(N,{ref_key:"userFormRef",ref:x,model:n,rules:q,"label-position":"left","label-width":"120px",class:"user-form"},{default:o(()=>[l(w,{gutter:20},{default:o(()=>[l(p,{span:12},{default:o(()=>[l(u,{label:"用户名",prop:"username"},{default:o(()=>[l(_,{modelValue:n.username,"onUpdate:modelValue":e[0]||(e[0]=a=>n.username=a),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),l(p,{span:12},{default:o(()=>[l(u,{label:"邮箱",prop:"email"},{default:o(()=>[l(_,{modelValue:n.email,"onUpdate:modelValue":e[1]||(e[1]=a=>n.email=a),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:o(()=>[l(p,{span:12},{default:o(()=>[l(u,{label:"手机号",prop:"phone"},{default:o(()=>[l(_,{modelValue:n.phone,"onUpdate:modelValue":e[2]||(e[2]=a=>n.phone=a),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1})]),_:1}),l(p,{span:12},{default:o(()=>[l(u,{label:"角色"},{default:o(()=>[l(B,{modelValue:n.role,"onUpdate:modelValue":e[3]||(e[3]=a=>n.role=a),placeholder:"请选择角色",disabled:""},{default:o(()=>[l(v,{label:"管理员",value:"admin"}),l(v,{label:"普通用户",value:"user"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:o(()=>[l(p,{span:24},{default:o(()=>[l(u,{label:"简介",prop:"bio"},{default:o(()=>[l(_,{modelValue:n.bio,"onUpdate:modelValue":e[4]||(e[4]=a=>n.bio=a),type:"textarea",rows:4,placeholder:"请输入个人简介"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(u,null,{default:o(()=>[l(c,{type:"primary",onClick:M,loading:y.value},{default:o(()=>[...e[12]||(e[12]=[d(" 保存修改 ",-1)])]),_:1},8,["loading"]),l(c,{onClick:z},{default:o(()=>[...e[13]||(e[13]=[d(" 重置 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),s("div",re,[e[17]||(e[17]=s("h3",{class:"section-title"},"头像设置",-1)),s("div",ne,[s("div",de,[l(L,{size:120,src:n.avatar},{default:o(()=>[d(Z(n.username.charAt(0).toUpperCase()),1)]),_:1},8,["src"])]),s("div",ue,[l(D,{class:"avatar-uploader",action:"#","show-file-list":!1,"on-success":h,"before-upload":A},{default:o(()=>[l(c,{type:"primary"},{default:o(()=>[l(O,null,{default:o(()=>[l(ee(le))]),_:1}),e[15]||(e[15]=d(" 上传头像 ",-1))]),_:1})]),_:1}),e[16]||(e[16]=s("div",{class:"upload-tips"}," 支持 JPG、PNG 格式，文件大小不超过 2MB ",-1))])])]),s("div",ie,[e[20]||(e[20]=s("h3",{class:"section-title"},"密码修改",-1)),l(N,{ref_key:"passwordFormRef",ref:k,model:i,rules:E,"label-position":"left","label-width":"120px",class:"password-form"},{default:o(()=>[l(w,{gutter:20},{default:o(()=>[l(p,{span:12},{default:o(()=>[l(u,{label:"原密码",prop:"oldPassword"},{default:o(()=>[l(_,{modelValue:i.oldPassword,"onUpdate:modelValue":e[5]||(e[5]=a=>i.oldPassword=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(w,{gutter:20},{default:o(()=>[l(p,{span:12},{default:o(()=>[l(u,{label:"新密码",prop:"newPassword"},{default:o(()=>[l(_,{modelValue:i.newPassword,"onUpdate:modelValue":e[6]||(e[6]=a=>i.newPassword=a),type:"password",placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1}),l(p,{span:12},{default:o(()=>[l(u,{label:"确认密码",prop:"confirmPassword"},{default:o(()=>[l(_,{modelValue:i.confirmPassword,"onUpdate:modelValue":e[7]||(e[7]=a=>i.confirmPassword=a),type:"password",placeholder:"请确认新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(u,null,{default:o(()=>[l(c,{type:"primary",onClick:I,loading:P.value},{default:o(()=>[...e[18]||(e[18]=[d(" 修改密码 ",-1)])]),_:1},8,["loading"]),l(c,{onClick:S},{default:o(()=>[...e[19]||(e[19]=[d(" 重置 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),l(T,{label:"系统配置",name:"systemConfig"},{default:o(()=>[s("div",me,[e[24]||(e[24]=s("h3",{class:"section-title"},"主题设置",-1)),s("div",pe,[l($,{modelValue:g.theme,"onUpdate:modelValue":e[8]||(e[8]=a=>g.theme=a)},{default:o(()=>[l(C,{label:"light"},{default:o(()=>[...e[21]||(e[21]=[d("浅色主题",-1)])]),_:1}),l(C,{label:"dark"},{default:o(()=>[...e[22]||(e[22]=[d("深色主题",-1)])]),_:1}),l(C,{label:"auto"},{default:o(()=>[...e[23]||(e[23]=[d("跟随系统",-1)])]),_:1})]),_:1},8,["modelValue"])])]),s("div",fe,[e[25]||(e[25]=s("h3",{class:"section-title"},"语言设置",-1)),s("div",_e,[l(B,{modelValue:g.language,"onUpdate:modelValue":e[9]||(e[9]=a=>g.language=a),placeholder:"请选择语言"},{default:o(()=>[l(v,{label:"中文",value:"zh-CN"}),l(v,{label:"English",value:"en-US"})]),_:1},8,["modelValue"])])]),s("div",ge,[e[30]||(e[30]=s("h3",{class:"section-title"},"通知设置",-1)),s("div",ce,[l(H,{modelValue:g.notifications,"onUpdate:modelValue":e[10]||(e[10]=a=>g.notifications=a)},{default:o(()=>[l(V,{label:"邮件通知"},{default:o(()=>[...e[26]||(e[26]=[d("邮件通知",-1)])]),_:1}),l(V,{label:"短信通知"},{default:o(()=>[...e[27]||(e[27]=[d("短信通知",-1)])]),_:1}),l(V,{label:"系统通知"},{default:o(()=>[...e[28]||(e[28]=[d("系统通知",-1)])]),_:1}),l(V,{label:"推送通知"},{default:o(()=>[...e[29]||(e[29]=[d("推送通知",-1)])]),_:1})]),_:1},8,["modelValue"])])]),s("div",be,[e[32]||(e[32]=s("h3",{class:"section-title"},"保存配置",-1)),l(c,{type:"primary",onClick:J,loading:U.value},{default:o(()=>[...e[31]||(e[31]=[d(" 保存配置 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1},8,["modelValue"])])}}}),ye=ae(we,[["__scopeId","data-v-6fa90ed5"]]);export{ye as default};
