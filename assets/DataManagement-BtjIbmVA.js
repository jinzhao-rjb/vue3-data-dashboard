import{a as ae,r as _,b as h,j as le,e as oe,g as e,f as S,w as a,h as n,y as ne,z as re,A as se,o as P,i as u,m as b,B as ue,C as de,D as ie,F as pe,t as me,G as ce,H as ge,I as _e,E as k,u as fe,_ as ve}from"./index-DiN20nqF.js";const be={class:"data-management-container"},ye={class:"card"},Ve={class:"pagination-container"},we={class:"dialog-footer"},Ce=ae({__name:"DataManagement",setup(De){const R=fe(),V=_(!1),w=_(!1),f=_(!1),y=_("新增数据"),C=_(),T=_([]),p=h({name:"",status:"",dateRange:null}),r=h({currentPage:1,pageSize:10,total:100}),x=_([]),s=h({id:0,name:"",category:"",value:0,status:"active",description:""}),A={name:[{required:!0,message:"请输入名称",trigger:"blur"},{min:2,max:50,message:"名称长度在 2 到 50 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],value:[{required:!0,message:"请输入数值",trigger:"blur"}]},Y=()=>{const o=[];for(let t=1;t<=100;t++)o.push({id:t,name:`数据项 ${t}`,category:`category${String.fromCharCode(65+t%4)}`,value:Math.floor(Math.random()*1e4),status:t%5===0?"inactive":"active",createdAt:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString().split("T")[0],updatedAt:new Date(Date.now()-Math.random()*15*24*60*60*1e3).toISOString().split("T")[0]});return o},m=()=>{V.value=!0,setTimeout(()=>{const o=Y(),t=(r.currentPage-1)*r.pageSize,c=t+r.pageSize;x.value=o.slice(t,c),r.total=o.length,V.value=!1},500)},I=()=>{R.back()},z=()=>{r.currentPage=1,m()},j=()=>{Object.assign(p,{name:"",status:"",dateRange:null}),r.currentPage=1,m()},E=o=>{r.pageSize=o,m()},O=o=>{r.currentPage=o,m()},$=o=>{T.value=o},q=()=>{y.value="新增数据",Object.assign(s,{id:0,name:"",category:"",value:0,status:"active",description:""}),f.value=!0},N=o=>{y.value="编辑数据",Object.assign(s,{...o}),f.value=!0},F=o=>{_e.confirm("确定要删除这条数据吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{setTimeout(()=>{k.success("删除成功"),m()},500)}).catch(()=>{})},K=async()=>{if(C.value)try{await C.value.validate(),w.value=!0,await new Promise(o=>setTimeout(o,800)),k.success(y.value.includes("新增")?"新增成功":"编辑成功"),f.value=!1,m()}catch(o){k.error(o.message||"提交失败")}finally{w.value=!1}};return le(()=>{m()}),(o,t)=>{const c=n("el-icon"),g=n("el-button"),G=n("el-page-header"),D=n("el-input"),d=n("el-form-item"),v=n("el-option"),M=n("el-select"),H=n("el-date-picker"),B=n("el-form"),i=n("el-table-column"),J=n("el-tag"),L=n("el-table"),Q=n("el-pagination"),W=n("el-input-number"),U=n("el-radio"),X=n("el-radio-group"),Z=n("el-dialog"),ee=re("loading");return P(),oe("div",be,[e(G,{onBack:I,content:"数据管理"},{extra:a(()=>[e(g,{type:"primary",onClick:q},{default:a(()=>[e(c,null,{default:a(()=>[e(b(ue))]),_:1}),t[12]||(t[12]=u(" 新增数据 ",-1))]),_:1})]),_:1}),S("div",ye,[e(B,{inline:!0,model:p,class:"search-form"},{default:a(()=>[e(d,{label:"名称"},{default:a(()=>[e(D,{modelValue:p.name,"onUpdate:modelValue":t[0]||(t[0]=l=>p.name=l),placeholder:"请输入名称",clearable:"",onKeyup:de(z,["enter"])},null,8,["modelValue"])]),_:1}),e(d,{label:"状态"},{default:a(()=>[e(M,{modelValue:p.status,"onUpdate:modelValue":t[1]||(t[1]=l=>p.status=l),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(v,{label:"启用",value:"active"}),e(v,{label:"禁用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"日期范围"},{default:a(()=>[e(H,{modelValue:p.dateRange,"onUpdate:modelValue":t[2]||(t[2]=l=>p.dateRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(g,{type:"primary",onClick:z},{default:a(()=>[e(c,null,{default:a(()=>[e(b(ie))]),_:1}),t[13]||(t[13]=u(" 搜索 ",-1))]),_:1}),e(g,{onClick:j},{default:a(()=>[e(c,null,{default:a(()=>[e(b(pe))]),_:1}),t[14]||(t[14]=u(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"]),ne((P(),se(L,{data:x.value,style:{width:"100%"},onSelectionChange:$},{default:a(()=>[e(i,{type:"selection",width:"55"}),e(i,{prop:"id",label:"ID",width:"80"}),e(i,{prop:"name",label:"名称"}),e(i,{prop:"category",label:"分类"}),e(i,{prop:"value",label:"数值",width:"120"}),e(i,{prop:"status",label:"状态",width:"100"},{default:a(l=>[e(J,{type:l.row.status==="active"?"success":"danger"},{default:a(()=>[u(me(l.row.status==="active"?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"createdAt",label:"创建时间",width:"180"}),e(i,{prop:"updatedAt",label:"更新时间",width:"180"}),e(i,{label:"操作",width:"200",fixed:"right"},{default:a(l=>[e(g,{type:"primary",size:"small",onClick:te=>N(l.row)},{default:a(()=>[e(c,null,{default:a(()=>[e(b(ce))]),_:1}),t[15]||(t[15]=u(" 编辑 ",-1))]),_:1},8,["onClick"]),e(g,{type:"danger",size:"small",onClick:te=>F(l.row)},{default:a(()=>[e(c,null,{default:a(()=>[e(b(ge))]),_:1}),t[16]||(t[16]=u(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ee,V.value]]),S("div",Ve,[e(Q,{"current-page":r.currentPage,"onUpdate:currentPage":t[3]||(t[3]=l=>r.currentPage=l),"page-size":r.pageSize,"onUpdate:pageSize":t[4]||(t[4]=l=>r.pageSize=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:r.total,onSizeChange:E,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),e(Z,{modelValue:f.value,"onUpdate:modelValue":t[11]||(t[11]=l=>f.value=l),title:y.value,width:"600px",center:""},{footer:a(()=>[S("span",we,[e(g,{onClick:t[10]||(t[10]=l=>f.value=!1)},{default:a(()=>[...t[19]||(t[19]=[u("取消",-1)])]),_:1}),e(g,{type:"primary",onClick:K,loading:w.value},{default:a(()=>[...t[20]||(t[20]=[u(" 提交 ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[e(B,{ref_key:"formRef",ref:C,model:s,rules:A,"label-position":"top","label-width":"100px"},{default:a(()=>[e(d,{label:"名称",prop:"name"},{default:a(()=>[e(D,{modelValue:s.name,"onUpdate:modelValue":t[5]||(t[5]=l=>s.name=l),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"分类",prop:"category"},{default:a(()=>[e(M,{modelValue:s.category,"onUpdate:modelValue":t[6]||(t[6]=l=>s.category=l),placeholder:"请选择分类"},{default:a(()=>[e(v,{label:"分类A",value:"categoryA"}),e(v,{label:"分类B",value:"categoryB"}),e(v,{label:"分类C",value:"categoryC"}),e(v,{label:"分类D",value:"categoryD"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"数值",prop:"value"},{default:a(()=>[e(W,{modelValue:s.value,"onUpdate:modelValue":t[7]||(t[7]=l=>s.value=l),min:0,max:1e4,step:1,placeholder:"请输入数值"},null,8,["modelValue"])]),_:1}),e(d,{label:"状态",prop:"status"},{default:a(()=>[e(X,{modelValue:s.status,"onUpdate:modelValue":t[8]||(t[8]=l=>s.status=l)},{default:a(()=>[e(U,{label:"active"},{default:a(()=>[...t[17]||(t[17]=[u("启用",-1)])]),_:1}),e(U,{label:"inactive"},{default:a(()=>[...t[18]||(t[18]=[u("禁用",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"描述",prop:"description"},{default:a(()=>[e(D,{modelValue:s.description,"onUpdate:modelValue":t[9]||(t[9]=l=>s.description=l),type:"textarea",rows:4,placeholder:"请输入描述"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Se=ve(Ce,[["__scopeId","data-v-2e65b335"]]);export{Se as default};
